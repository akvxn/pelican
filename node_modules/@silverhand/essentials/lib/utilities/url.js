/** Join multiple path segments. This function exists since there's no native implementation in browser. */
const joinPath = (...segments) => {
    const result = [];
    for (const segment of segments.join('/').split('/')) {
        if (!segment || segment === '.') {
            continue;
        }
        if ([...segment].every((char) => char === '.')) {
            // eslint-disable-next-line @silverhand/fp/no-mutating-methods
            result.pop();
            continue;
        }
        // eslint-disable-next-line @silverhand/fp/no-mutating-methods
        result.push(segment);
    }
    return '/' + result.join('/');
};
/** Append path segments to the base URL. */
const appendPath = (baseUrl, ...pathnames) => new URL(joinPath(baseUrl.pathname, ...pathnames), baseUrl);

export { appendPath, joinPath };
